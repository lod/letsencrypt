<VirtualHost *:443>
	ServerName redirecter.example.com
	DocumentRoot /srv/www/redirecter.example.com

	SSLEngine on
	SSLCertificateFile /etc/letsencrypt/live/redirecter.example.com/fullchain.pem
	SSLCertificateKeyFile /etc/letsencrypt/live/redirecter.example.com/privkey.pem

	# HSTS to prevent downgrade attacks - 15768000 seconds = 6 months
	Header always set Strict-Transport-Security "max-age=15768000"

	Options FollowSymLinks
	ServerSignature On

	LogLevel warn
	ErrorLog /var/log/apache2/redirecter.error.log
	CustomLog /var/log/apache2/redirecter.access.log vhost_combined
</VirtualHost>

# Redirect various other domains and ports into https://redirecter.example.com/

<VirtualHost *:80>
	ServerName redirecter.example.com
	ServerAlias example.com www.example.com www.redirecter.example.com
	Redirect permanent / https://redirecter.example.com/

	LogLevel warn
	ErrorLog /var/log/apache2/redirecter.feed.error.log
	CustomLog /var/log/apache2/redirecter.feed.access.log vhost_combined
</VirtualHost>

<VirtualHost *:443>
	ServerName example.com
	ServerAlias www.example.com www.redirecter.example.com
	Redirect permanent / https://redirecter.example.com/

	SSLEngine on
	SSLCertificateFile /etc/letsencrypt/live/redirecter.example.com/fullchain.pem
	SSLCertificateKeyFile /etc/letsencrypt/live/redirecter.example.com/privkey.pem

	# HSTS to prevent downgrade attacks - 15768000 seconds = 6 months
	Header always set Strict-Transport-Security "max-age=15768000"

	LogLevel warn
	ErrorLog /var/log/apache2/redirecter.feed.error.log
	CustomLog /var/log/apache2/redirecter.feed.access.log vhost_combined
</VirtualHost>

